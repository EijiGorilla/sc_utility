"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[8103],{8103:(e,t,a)=>{a.d(t,{previewSymbol2D:()=>S});var l=a(51995),n=a(86950),i=a(10064),o=a(82272),s=a(17842),c=a(79563),h=a(37817),u=a(69157),r=a(81283);const m="picture-fill",d="picture-marker",p="simple-fill",f="simple-line",y="simple-marker",g="text",w="Aa",b=h.b_.size,v=h.b_.maxSize,x=h.b_.maxOutlineSize,M=h.b_.lineWidth,k=225,L=document.createElement("canvas");function z(e,t){const a=L.getContext("2d"),l=[];t&&(t.weight&&l.push(t.weight),t.size&&l.push(t.size+"px"),t.family&&l.push(t.family)),a.font=l.join(" ");const{width:n,actualBoundingBoxLeft:i,actualBoundingBoxRight:o,actualBoundingBoxAscent:s,actualBoundingBoxDescent:c}=a.measureText(e);return{width:Math.ceil(Math.max(n,i+o)),height:Math.ceil(s+c),x:Math.floor(i),y:Math.floor((s-c)/2)}}function C(e){const t=e?.size;return{width:null!=t&&"object"==typeof t&&"width"in t?(0,s.F2)(t.width):null,height:null!=t&&"object"==typeof t&&"height"in t?(0,s.F2)(t.height):null}}function F(e,t){return e>t?"dark":"light"}async function S(e,t){const{shapeDescriptor:a,size:l,renderOptions:n}=function(e,t){const a="number"==typeof t?.size?t?.size:null,l=null!=a?(0,s.F2)(a):null,n=null!=t?.maxSize?(0,s.F2)(t.maxSize):null;let i="angle"in e?e.angle:null;null!=t?.rotation&&(i=(i??0)+t.rotation);const o=(0,c._M)(e);let u=(0,c.mx)(e);"dark"!==B(e,245)||t?.ignoreWhiteSymbols||(u={width:.75,...u,color:"#bdc3c7"});const r={shape:null,fill:o,stroke:u,offset:[0,0]};u?.width&&(u.width=Math.min(u.width,x));const k=u?.width||0;let L=null!=t?.size&&(null==t?.scale||t?.scale),F=0,S=0,Z=!1;switch(e.type){case y:{const a=e.style,{width:o,height:c}=C(t),h=o===c&&null!=o?o:null!=l?l:Math.min((0,s.F2)(e.size),n||v);switch(F=h,S=h,a){case"circle":r.shape={type:"circle",cx:0,cy:0,r:.5*h},L||(F+=k,S+=k);break;case"cross":r.shape={type:"path",path:[{command:"M",values:[0,.5*S]},{command:"L",values:[F,.5*S]},{command:"M",values:[.5*F,0]},{command:"L",values:[.5*F,S]}]};break;case"diamond":r.shape={type:"path",path:[{command:"M",values:[0,.5*S]},{command:"L",values:[.5*F,0]},{command:"L",values:[F,.5*S]},{command:"L",values:[.5*F,S]},{command:"Z",values:[]}]},L||(F+=k,S+=k);break;case"square":r.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[F,0]},{command:"L",values:[F,S]},{command:"L",values:[0,S]},{command:"Z",values:[]}]},L||(F+=k,S+=k),i&&(Z=!0);break;case"triangle":r.shape={type:"path",path:[{command:"M",values:[.5*F,0]},{command:"L",values:[F,S]},{command:"L",values:[0,S]},{command:"Z",values:[]}]},L||(F+=k,S+=k),i&&(Z=!0);break;case"x":r.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[F,S]},{command:"M",values:[F,0]},{command:"L",values:[0,S]}]},i&&(Z=!0);break;case"path":r.shape={type:"path",path:e.path||""},L||(F+=k,S+=k),i&&(Z=!0),L=!0}break}case f:{const{width:e,height:a}=C(t),n=(0,c.iI)(u).reduce(((e,t)=>e+t),0),i=n&&Math.ceil(M/n),o=a??l??k,s=e??(n*i||M);u&&(u.width=o),F=s,S=o,L=!0,r.shape={type:"path",path:[{command:"M",values:[o/2,S/2]},{command:"L",values:[F-o/2,S/2]}]};break}case m:case p:{const e="object"==typeof t?.symbolConfig&&!!t?.symbolConfig?.isSquareFill,{width:a,height:n}=C(t);F=!e&&a!==n||null==a?null!=l?l:b:a,S=!e&&a!==n||null==n?F:n,L||(F+=k,S+=k),L=!0,r.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[F,0]},{command:"L",values:[F,S]},{command:"L",values:[0,S]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:h.JZ.fill[0];break}case d:{const a=Math.min((0,s.F2)(e.width),n||v),o=Math.min((0,s.F2)(e.height),n||v),{width:c,height:h}=C(t),u=c===h&&null!=c?c:null!=l?l:Math.max(a,o),m=a/o;F=m<=1?Math.ceil(u*m):u,S=m<=1?u:Math.ceil(u/m),r.shape={type:"image",x:-Math.round(F/2),y:-Math.round(S/2),width:F,height:S,src:e.url||""},i&&(Z=!0);break}case g:{const a=e,i=t?.overrideText||a.text||w,o=a.font,{width:c,height:h}=C(t),u=null!=h?h:null!=l?l:Math.min((0,s.F2)(o.size),n||v),{width:m,height:d}=z(i,{weight:o.weight,size:u,family:o.family}),p=/[\uE600-\uE6FF]/.test(i);F=c??(p?u:m),S=p?u:d;let f=.5*(p?u:d);p&&(f+=5),r.shape={type:"text",text:i,x:a.xoffset||0,y:a.yoffset||f,align:"middle",alignBaseline:a.verticalAlignment,decoration:o&&o.decoration,rotated:a.rotated,kerning:a.kerning},r.font=o&&{size:u,style:o.style,decoration:o.decoration,weight:o.weight,family:o.family};break}}return{shapeDescriptor:r,size:[F,S],renderOptions:{node:t?.node,scale:L,opacity:t?.opacity,rotations:[i],useRotationSize:Z,effectView:t?.effectView,ariaLabel:t?.ariaLabel}}}(e,t);if(!a.shape)throw new i.Z("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(e,t){const a=t.fill,l=e.color;if("pattern"===a?.type&&l&&e.type!==m){const e=await(0,c.Od)(a.src,l.toCss(!0));a.src=e,t.fill=a}}(e,a),await async function(e,t,a,l){if(!("font"in e)||!e.font||"text"!==t.shape.type)return;try{await(0,o.mx)(e.font)}catch{}const{width:n,height:i}=C(l);if(!/[\uE600-\uE6FF]/.test(t.shape.text)){const{width:o,height:s,x:c,y:h}=z(t.shape.text,{weight:t.font?.weight,size:t.font?.size,family:t.font?.family});a[0]=n??o,a[1]=i??s,t.shape.x=c,t.shape.y=h;let u="angle"in e?e.angle:null;if(null!=l?.rotation&&(u=(u??0)+l.rotation),u){const e=u*(Math.PI/180),t=Math.abs(Math.sin(e)),l=Math.abs(Math.cos(e));a[1]=a[0]*t+a[1]*l}}}(e,a,l,t);const k=[[a]];if("object"==typeof t?.symbolConfig&&t?.symbolConfig?.applyColorModulation){const e=.6*l[0];k.unshift([{...a,offset:[-e,0],fill:(0,h.dc)(a.fill,-.3)}]),k.push([{...a,offset:[e,0],fill:(0,h.dc)(a.fill,.3)}]),l[0]+=2*e,n.scale=!1}return"text"===e.type&&function(e,t,a,l,n){if(null!=e.haloColor&&null!=e.haloSize){n.masking??=a.map((()=>[]));const i=(0,s.F2)(e.haloSize);l[0]+=i,l[1]+=i,a.unshift([{...t,fill:null,stroke:{color:e.haloColor,width:2*i,join:"round",cap:"round"}}]),n.masking.unshift([{shape:{type:"rect",x:0,y:0,width:l[0]+2*r.c9,height:l[1]+2*r.c9},fill:[255,255,255],stroke:null},{...t,fill:[0,0,0,0],stroke:null}])}null==e.backgroundColor&&null==e.borderLineColor||(l[0]+=2*r.c9,l[1]+=2*r.c9,a.unshift([{shape:{type:"rect",x:0,y:0,width:l[0],height:l[1]},fill:e.backgroundColor,stroke:{color:e.borderLineColor,width:(0,s.F2)(e.borderLineSize)}}]),n.masking?.unshift([]))}(e,a,k,l,n),(0,u.wh)(k,l,n)}function B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;const a=(0,c._M)(e),i=(0,c.mx)(e),o=!a||"type"in a?null:new l.Z(a),s=i?.color?new l.Z(i?.color):null,h=o?F((0,n.EX)(o),t):null,u=s?F((0,n.EX)(s),t):null;return u?h?h===u?h:t>=k?"light":"dark":u:h}}}]);
//# sourceMappingURL=8103.71389d3b.chunk.js.map