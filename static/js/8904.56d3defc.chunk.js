"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[8904],{58904:(e,t,i)=>{i.d(t,{default:()=>q});var l=i(27366),o=i(80987),s=i(44927),n=i(79056),a=i(32718),r=i(49861),d=(i(93169),i(84936),i(69912)),c=i(33565),h=i(35396),u=i(9309),p=i(8905),m=i(7021),b=i(67144),v=i(80975),_=i(80532),g=i(28907),y=i(67005);const I="esri-table-list",C="".concat(I,"__item"),f={base:I,actionMenu:"".concat(I,"__action-menu"),actionGroup:"".concat(I,"__action-group"),filterNoResults:"".concat(I,"__filter-no-results"),item:C,itemContent:"".concat(C,"-content"),itemContentBottom:"".concat(C,"-content-bottom"),itemMessage:"".concat(C,"-message"),itemActionIcon:"".concat(C,"-action-icon"),itemActionImage:"".concat(C,"-action-image"),itemTemporaryIcon:"".concat(C,"-temporary-icon"),publishing:"".concat(I,"__publishing"),statusIndicator:"".concat(I,"__status-indicator")};var w=i(7138),E=i(94172),M=i(89125),L=i(693),F=i(57976),P=i(6945),T=i(5027),k=i(9676),S=i(53963);let D=class extends((0,n.IG)(c.Z)){constructor(e,t){super(e,t),this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}get disabled(){return!(this.content&&this.listItem)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){var e;const{image:t}=this,i=this._getFirstWidget();return null!==(e=this._get("icon"))&&void 0!==e?e:!t&&i?i.icon:null}set icon(e){this._overrideIfSome("icon",e)}get title(){var e,t;return this._get("title")||(null!==(e=null===(t=this._getFirstWidget())||void 0===t?void 0:t.label)&&void 0!==e?e:"")}set title(e){this._override("title",e)}render(){return(0,y.u)("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{disabled:t,open:i}=this;return e&&!t&&i?"string"==typeof e?(0,y.u)("div",{innerHTML:e,key:e}):(0,S.Qd)(e)?(0,y.u)("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?(0,y.u)("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:t}=this;return t?Array.isArray(e)?e.map((e=>this._renderContent(e))):this._renderContent(e):null}_attachToNode(e){e.appendChild(this)}_getWidget(e){return(0,S.Qd)(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map((e=>this._getWidget(e))).find((e=>e)):this._getWidget(e)}};(0,l._)([(0,r.Cb)()],D.prototype,"className",void 0),(0,l._)([(0,r.Cb)()],D.prototype,"content",void 0),(0,l._)([(0,r.Cb)()],D.prototype,"disabled",null),(0,l._)([(0,r.Cb)()],D.prototype,"flowEnabled",void 0),(0,l._)([(0,r.Cb)()],D.prototype,"icon",null),(0,l._)([(0,r.Cb)()],D.prototype,"image",void 0),(0,l._)([(0,r.Cb)()],D.prototype,"listItem",void 0),(0,l._)([(0,r.Cb)()],D.prototype,"open",void 0),(0,l._)([(0,r.Cb)()],D.prototype,"title",null),(0,l._)([(0,r.Cb)()],D.prototype,"visible",void 0),D=(0,l._)([(0,d.j)("esri.widgets.TableList.ListItemPanel")],D);const N=D;var A;const O=o.Z.ofType({key:"type",defaultKeyValue:"button",base:F.Z,typeMap:{button:P.Z,toggle:k.Z,slider:T.Z}}),B=o.Z.ofType(O);let Z=A=class extends((0,n.IG)(w.Z)){constructor(e){super(e),this.actionsSections=new B,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.panel=null,this.sortable=!0}initialize(){if(this.addHandles([(0,E.YP)((()=>this.panel),(e=>this._setListItemOnPanel(e)),E.nn)]),"function"==typeof this.listItemCreatedFunction){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){var e;null===(e=this.panel)||void 0===e||e.destroy()}get error(){var e;return null===(e=this.layer)||void 0===e?void 0:e.loadError}castPanel(e){var t;return null!==(t=this.panel)&&void 0!==t&&t.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new N(e):null}get publishing(){var e,t;const{layer:i,checkPublishStatusEnabled:l}=this;return null!==(e=l&&i&&"publishingInfo"in i&&"publishing"===(null===(t=i.publishingInfo)||void 0===t?void 0:t.status))&&void 0!==e&&e}get title(){var e,t;const i=(0,L.U2)(this,"layer.layer");return null!==(e=!i||i&&(0,L.U2)(this,"layer.layer.loaded")?null===(t=this.layer)||void 0===t?void 0:t.title:null)&&void 0!==e?e:""}set title(e){this._overrideIfSome("title",e)}clone(){return new A({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,panel:this.panel,sortable:this.sortable,title:this.title})}_setListItemOnPanel(e){e&&(e.listItem=this)}};(0,l._)([(0,r.Cb)({type:B})],Z.prototype,"actionsSections",void 0),(0,l._)([(0,r.Cb)()],Z.prototype,"actionsOpen",void 0),(0,l._)([(0,r.Cb)()],Z.prototype,"checkPublishStatusEnabled",void 0),(0,l._)([(0,r.Cb)({readOnly:!0})],Z.prototype,"error",null),(0,l._)([(0,r.Cb)()],Z.prototype,"hidden",void 0),(0,l._)([(0,r.Cb)()],Z.prototype,"layer",void 0),(0,l._)([(0,r.Cb)()],Z.prototype,"listItemCreatedFunction",void 0),(0,l._)([(0,r.Cb)({type:N})],Z.prototype,"panel",void 0),(0,l._)([(0,M.p)("panel")],Z.prototype,"castPanel",null),(0,l._)([(0,r.Cb)({readOnly:!0})],Z.prototype,"publishing",null),(0,l._)([(0,r.Cb)()],Z.prototype,"sortable",void 0),(0,l._)([(0,r.Cb)()],Z.prototype,"title",null),Z=A=(0,l._)([(0,d.j)("esri.widgets.TableList.ListItem")],Z);const x=Z;var U=i(91505);const G="map",R="layer-list-mode",H=o.Z.ofType(x);let W=class extends U.Z.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.tableItems=new H,this.map=null}initialize(){this.addHandles([(0,E.YP)((()=>{var e;return[this.tables,null===(e=this.map)||void 0===e?void 0:e.allTables.toArray()]}),(()=>this._compileList()),E.nn),(0,E.YP)((()=>{var e;return[null===(e=this.map)||void 0===e?void 0:e.loaded,this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled]}),(()=>this._recompileList()))],G)}destroy(){this._removeAllItems(),this.map=null,this.tables=null}get tables(){var e;return null===(e=this.map)||void 0===e?void 0:e.allTables}set tables(e){this._overrideIfSome("tables",e)}get state(){const{map:e,tables:t}=this;if(!e)return t?"ready":"disabled";const i=null===e||void 0===e?void 0:e.loadStatus;return"string"==typeof i?"loaded"===i?"ready":"loading"===i?"loading":"disabled":"ready"}get totalItems(){return this.tableItems.length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}_removeAllItems(){this.tableItems.destroyAll()}_getViewableTables(e){return e?this.listModeDisabled?e:e.filter((e=>"hide"!==(0,u.aV)(e))):void 0}_watchTablesListMode(e){this.removeHandles(R),e&&!this.listModeDisabled&&this.addHandles((0,E.YP)((()=>e.filter((e=>"listMode"in e)).map((e=>e.listMode)).toArray()),(()=>this._compileList())),R)}_compileList(){const{tables:e}=this;this._watchTablesListMode(e);const t=this._getViewableTables(e);null!==t&&void 0!==t&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}_createNewItems(e){const{tableItems:t,listItemCreatedFunction:i,checkPublishStatusEnabled:l}=this;e.forEach((e=>{t.some((t=>t.layer===e))||t.add(new x({checkPublishStatusEnabled:l,layer:e,listItemCreatedFunction:i}))}))}_removeItems(e){const{tableItems:t}=this;t.forEach((i=>{if(!i)return;(null===e||void 0===e?void 0:e.find((e=>i.layer===e)))||(t.remove(i),i.destroy())}))}_sortItems(e){const{tableItems:t}=this;t.sort(((t,i)=>{const l=e.indexOf(t.layer),o=e.indexOf(i.layer);return l>o?-1:l<o?1:0}))}_recompileList(){this._removeAllItems(),this._compileList()}};(0,l._)([(0,r.Cb)()],W.prototype,"checkPublishStatusEnabled",void 0),(0,l._)([(0,r.Cb)()],W.prototype,"listItemCreatedFunction",void 0),(0,l._)([(0,r.Cb)({nonNullable:!0})],W.prototype,"listModeDisabled",void 0),(0,l._)([(0,r.Cb)({type:H,readOnly:!0})],W.prototype,"tableItems",void 0),(0,l._)([(0,r.Cb)()],W.prototype,"tables",null),(0,l._)([(0,r.Cb)()],W.prototype,"map",void 0),(0,l._)([(0,r.Cb)({readOnly:!0})],W.prototype,"state",null),(0,l._)([(0,r.Cb)()],W.prototype,"totalItems",null),W=(0,l._)([(0,d.j)("esri.widgets.TableList.TableListViewModel")],W);const z=W;let V=class extends w.Z{constructor(){super(...arguments),this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryTableIndicators=!1}};(0,l._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],V.prototype,"closeButton",void 0),(0,l._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],V.prototype,"collapseButton",void 0),(0,l._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],V.prototype,"errors",void 0),(0,l._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],V.prototype,"filter",void 0),(0,l._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],V.prototype,"flow",void 0),(0,l._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],V.prototype,"heading",void 0),(0,l._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],V.prototype,"statusIndicators",void 0),(0,l._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],V.prototype,"temporaryTableIndicators",void 0),V=(0,l._)([(0,d.j)("esri.widgets.TableList.TableListVisibleElements")],V);const j=V;function Y(e){return e["data-item"]}const K=o.Z.ofType(x);let Q=class extends((0,n.IG)(c.Z)){constructor(e,t){super(e,t),this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid="table-".concat(this.uid),this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterText="",this.headingLevel=2,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=u.MZ,this.minFilterItems=u.Kp,this.selectedItems=new K,this.selectionMode="none",this.viewModel=new z,this.visibleElements=new j,this._canMove=(e,t)=>{let{dragEl:i,fromEl:l,toEl:o}=e;const s="pull"===t?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,n=Y(i);if(null===n||void 0===n||!n.sortable)return!1;const a=Y(l),r=(0,u.Gr)(l),d=Y(o),c=(0,u.Gr)(o),h=!!r&&!!c&&r===c,p={selected:n,from:a,to:d},m=l.group,b=o.group;return m&&b&&"function"==typeof s?s.call(null,p):h},this._onCalciteListOrderChange=e=>{var t;const{_lastDragDetail:i}=this,{toEl:l,fromEl:o,dragEl:s,newIndex:n}=e;if(!o||!l||(null===i||void 0===i?void 0:i.newIndex)===n&&(null===i||void 0===i?void 0:i.dragEl)===s&&(null===i||void 0===i?void 0:i.toEl)===l&&(null===i||void 0===i?void 0:i.fromEl)===o)return;this._lastDragDetail=e;const a=Array.from(o.children).filter((e=>null===e||void 0===e?void 0:e.matches("calcite-list-item"))).map((e=>e.value));!function(e,t){null===e||void 0===e||e.sort(((e,i)=>{const l=t.indexOf(e.uid),o=t.indexOf(i.uid);return l>o?-1:l<o?1:0}))}(null===(t=this.map)||void 0===t?void 0:t.tables,a)},this._onTriggerAction=(e,t)=>{this.triggerAction(e,t)},this._onPanelOpen=()=>{this._focusPanelFlowItem=!0},this._onSelectedDragItemLayerUidChange=e=>{this._selectedDragItemLayerUid=e}}loadDependencies(){return(0,p.h)({button:()=>Promise.resolve().then(i.bind(i,32275)),flow:()=>i.e(3049).then(i.bind(i,53049)),"flow-item":()=>i.e(8926).then(i.bind(i,48926)),list:()=>Promise.resolve().then(i.bind(i,27505)),notice:()=>i.e(5669).then(i.bind(i,15669))})}get _dragEnabled(){return this.viewModel.totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this.viewModel.totalItems>=this.minFilterItems&&this.visibleElements.filter}get icon(){return"table"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get multipleSelectionEnabled(){return(0,s.Mr)(a.Z.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),"multiple"===this.selectionMode}set multipleSelectionEnabled(e){(0,s.Mr)(a.Z.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),this.selectionMode=e?"multiple":this.selectionEnabled?"single":"none"}get selectionEnabled(){return(0,s.Mr)(a.Z.getLogger(this),"selectionEnabled",{replacement:"selectionMode, dragEnabled",version:"4.29",warnOnce:!0}),"none"!==this.selectionMode&&this.dragEnabled}set selectionEnabled(e){(0,s.Mr)(a.Z.getLogger(this),"selectionEnabled",{replacement:"selectionMode, dragEnabled",version:"4.29",warnOnce:!0}),this.dragEnabled=e,this.selectionMode=e?this.multipleSelectionEnabled?"multiple":"single":"none"}get tableItems(){return this.viewModel.tableItems}get tables(){return this.viewModel.tables}set tables(e){this.viewModel.tables=e}triggerAction(e,t){return this.viewModel.triggerAction(e,t)}render(){var e,t;const i=null===(e=this.viewModel)||void 0===e?void 0:e.state,l={[m.z.hidden]:"loading"===i,[m.z.disabled]:"disabled"===i},o=null===(t=this.tableItems)||void 0===t?void 0:t.filter((e=>!e.hidden&&(this.visibleElements.errors||!e.error)));return(0,y.u)("div",{class:this.classes(f.base,m.z.widget,m.z.panel,l)},null!==o&&void 0!==o&&o.length?this._renderItems(o):this._renderNoItems())}_renderNoItemsMessage(){return(0,y.u)("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return(0,y.u)("div",{class:f.itemMessage,key:"esri-layer-list__no-items"},(0,y.u)("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}_renderPanelFlowItems(e){return null===e||void 0===e?void 0:e.toArray().filter((e=>{let{panel:t}=e;return(null===t||void 0===t?void 0:t.open)&&!t.disabled&&t.flowEnabled})).map((e=>{let{title:t,panel:i}=e;const l=()=>this._handlePanelFlowItemBack(i);return(0,y.u)("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:t,heading:i.title,headingLevel:this.headingLevel,key:"flow-panel-".concat(i.uid),onCalciteFlowItemBack:e=>{e.preventDefault(),l()}},i.render(),(0,y.u)("calcite-button",{appearance:"transparent",onclick:l,slot:"footer-actions",width:"full"},this.messagesCommon.back))}))}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,(0,v.kW)(e))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,(0,v.kW)(e))}_renderItems(e){const{visible:t,collapsed:i,visibleElements:{closeButton:l,collapseButton:o,heading:s,flow:n},_dragEnabled:a,_filterEnabled:r,_rootGroupUid:d,selectionMode:c,messages:h,filterPlaceholder:u,filterText:p}=this,m=[(0,y.u)("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:l,closed:!t,collapsed:i,collapsible:o,heading:s?h.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",onCalciteFlowItemClose:()=>this.visible=!1},(0,y.u)("calcite-list",{canPull:e=>this._canMove(e,"pull"),canPut:e=>this._canMove(e,"put"),"data-layer-type":d,dragEnabled:a,filterEnabled:r,filterPlaceholder:u,filterProps:b.I,filterText:r?p:"",group:d,key:"root-list",label:h.widgetLabel,selectionAppearance:"border",selectionMode:c,onCalciteListChange:e=>this._handleCalciteListChange(e),onCalciteListDragEnd:e=>this._handleCalciteListDragEnd(e.detail),onCalciteListFilter:e=>{var t,i;return this.filterText=null!==(t=null===(i=e.target)||void 0===i?void 0:i.filterText)&&void 0!==t?t:""},onCalciteListOrderChange:e=>this._onCalciteListOrderChange(e.detail)},null===e||void 0===e?void 0:e.toArray().map((e=>this._renderItem(e))),null!==e&&void 0!==e&&e.length&&r?(0,y.u)("div",{class:f.filterNoResults,slot:"filter-no-results"},(0,y.u)("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(e)];return t?n?(0,y.u)("calcite-flow",{key:"root-flow"},m):m:null}_handleCalciteListDragEnd(e){const{fromEl:t,dragEl:i,oldIndex:l}=e;t.insertBefore(i,t.children[l])}_renderItem(e){return(0,y.u)(h.Z,{canMove:this._canMove,css:f,dragEnabled:this.dragEnabled,item:e,key:"layerListItem-".concat(e.layer.uid),listModeDisabled:this.viewModel.listModeDisabled,messages:this.messages,messagesCommon:this.messagesCommon,rootGroupUid:this._rootGroupUid,selectedDragItemLayerUid:this._selectedDragItemLayerUid,selectedItems:this.selectedItems,selectionMode:this.selectionMode,visibleElements:this.visibleElements,onAction:this._onTriggerAction,onPanelOpen:this._onPanelOpen,onSelectedDragItemLayerUidChange:this._onSelectedDragItemLayerUidChange})}_handleCalciteListChange(e){const{selectionMode:t,selectedItems:i}=this;if("none"===t)return;const l=e.target.selectedItems.map((e=>Y(e))).filter(Boolean);i.removeAll(),i.addMany(l)}};(0,l._)([(0,r.Cb)()],Q.prototype,"_focusRootFlowItem",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"_focusPanelFlowItem",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"_dragEnabled",null),(0,l._)([(0,r.Cb)()],Q.prototype,"_filterEnabled",null),(0,l._)([(0,r.Cb)()],Q.prototype,"collapsed",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"dragEnabled",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"filterPlaceholder",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"filterText",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"headingLevel",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"icon",null),(0,l._)([(0,r.Cb)()],Q.prototype,"label",null),(0,l._)([(0,r.Cb)()],Q.prototype,"listItemCanGiveFunction",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"listItemCanReceiveFunction",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"listItemCreatedFunction",null),(0,l._)([(0,r.Cb)()],Q.prototype,"map",null),(0,l._)([(0,r.Cb)(),(0,_.H)("esri/widgets/TableList/t9n/TableList")],Q.prototype,"messages",void 0),(0,l._)([(0,r.Cb)(),(0,_.H)("esri/t9n/common")],Q.prototype,"messagesCommon",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"minDragEnabledItems",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"minFilterItems",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"multipleSelectionEnabled",null),(0,l._)([(0,r.Cb)()],Q.prototype,"selectionEnabled",null),(0,l._)([(0,r.Cb)()],Q.prototype,"selectedItems",void 0),(0,l._)([(0,r.Cb)()],Q.prototype,"selectionMode",void 0),(0,l._)([(0,r.Cb)({readOnly:!0})],Q.prototype,"tableItems",null),(0,l._)([(0,r.Cb)()],Q.prototype,"tables",null),(0,l._)([(0,g.s)("trigger-action"),(0,r.Cb)({type:z})],Q.prototype,"viewModel",void 0),(0,l._)([(0,r.Cb)({type:j,nonNullable:!0})],Q.prototype,"visibleElements",void 0),Q=(0,l._)([(0,d.j)("esri.widgets.TableList")],Q);const q=Q}}]);
//# sourceMappingURL=8904.56d3defc.chunk.js.map