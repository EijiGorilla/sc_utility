"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[8883],{58883:(e,t,n)=>{n.r(t),n.d(t,{loadGLTFMesh:()=>k});var o=n(51995),r=n(76200),l=n(10064),a=n(77427),s=n(16889),u=n(29303),i=n(21389),c=n(12400),f=n(86361),d=n(64995),p=n(53942),m=n(79694),v=n(50565),g=n(27474),x=n(69048),y=n(25158),T=n(11186),h=n(6754),w=n(48734);Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){var o,r;const l=e.typedBuffer,a=e.typedBufferStride,s=t.typedBuffer,u=t.typedBufferStride,i=n?n.count:t.count;let c=(null!==(o=null===n||void 0===n?void 0:n.dstIndex)&&void 0!==o?o:0)*a,f=(null!==(r=null===n||void 0===n?void 0:n.srcIndex)&&void 0!==r?r:0)*u;for(let d=0;d<i;++d){for(let e=0;e<9;++e)l[c+e]=s[f+e];c+=a,f+=u}}},Symbol.toStringTag,{value:"Module"}));Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){var o,r;const l=e.typedBuffer,a=e.typedBufferStride,s=t.typedBuffer,u=t.typedBufferStride,i=n?n.count:t.count;let c=(null!==(o=null===n||void 0===n?void 0:n.dstIndex)&&void 0!==o?o:0)*a,f=(null!==(r=null===n||void 0===n?void 0:n.srcIndex)&&void 0!==r?r:0)*u;for(let d=0;d<i;++d){for(let e=0;e<16;++e)l[c+e]=s[f+e];c+=a,f+=u}}},Symbol.toStringTag,{value:"Module"}));n(53801);var b=n(88396),B=n(92770),C=n(69618);function S(e,t){return new e(new ArrayBuffer(t*e.ElementCount*(0,w.n1)(e.ElementType)))}var E=n(66149),R=n(27053),A=n(57516),M=n(32315),_=n(57661),O=n(68845),F=n(8548);async function k(e,t,n){const u=new R.C(function(e){const t=null===e||void 0===e?void 0:e.resolveFile;return t?{busy:!1,request:async(e,n,o)=>{var l;const a=null!==(l=null===t||void 0===t?void 0:t(e))&&void 0!==l?l:e,s="image"===n?"image":"binary"===n||"image+type"===n?"array-buffer":"json";return(await(0,r.Z)(a,{responseType:s,signal:null===o||void 0===o?void 0:o.signal,timeout:0})).data}}:null}(n)),i=(await(0,A.Q)(u,t,n,!0)).model,d=i.lods.shift(),T=new Map,h=new Map;i.textures.forEach(((e,t)=>T.set(t,function(e){return new m.Z({data:((0,_.$A)(e.data),e.data),wrap:G(e.parameters.wrap)})}(e)))),i.materials.forEach(((e,t)=>h.set(t,function(e,t){const n=new o.Z(function(e,t){return(0,f.al)(U(e[0]),U(e[1]),U(e[2]),t)}(e.color,e.opacity)),r=e.emissiveFactor?new o.Z(function(e){return(0,c.al)(U(e[0]),U(e[1]),U(e[2]))}(e.emissiveFactor)):null,l=e=>{var t;return e?new v.Z({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:(0,s.BV)(null!==(t=e.rotation)&&void 0!==t?t:0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null};return new p.Z({color:n,colorTexture:t.get(e.textureColor),normalTexture:t.get(e.textureNormal),emissiveColor:r,emissiveTexture:t.get(e.textureEmissive),occlusionTexture:t.get(e.textureOcclusion),alphaMode:P(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:t.get(e.textureMetallicRoughness),colorTextureTransform:l(e.colorTextureTransform),normalTextureTransform:l(e.normalTextureTransform),occlusionTextureTransform:l(e.occlusionTextureTransform),emissiveTextureTransform:l(e.emissiveTextureTransform),metallicRoughnessTextureTransform:l(e.metallicRoughnessTextureTransform)})}(e,T))));const w=function(e){let t=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},o=new Map,r=new Map,l=[];for(const s of e.parts){const{attributes:{position:e,normal:u,color:i,tangent:c,texCoord0:f}}=s,d="\n      ".concat(I(e,o),"/\n      ").concat(I(u,o),"/\n      ").concat(I(i,o),"/\n      ").concat(I(c,o),"/\n      ").concat(I(f,o),"/\n      ").concat(Z(s.transform),"\n    ");let p=!1;const m=(0,a.s1)(r,d,(()=>(p=!0,{start:t,length:e.count})));p&&(t+=e.count),u&&(n.normal=!0),i&&(n.color=!0),c&&(n.tangent=!0),f&&(n.texCoord0=!0),l.push({gltf:s,writeVertices:p,region:m})}return{vertexAttributes:{position:S(y.fP,t),normal:n.normal?S(y.ct,t):null,tangent:n.tangent?S(y.ek,t):null,color:n.color?S(y.mc,t):null,texCoord0:n.texCoord0?S(y.Eu,t):null},parts:l,components:[]}}(d);for(const o of w.parts)j(w,o,h);const{position:b,normal:B,tangent:C,color:M,texCoord0:O}=w.vertexAttributes,F=(0,x.G7)(e,n),k=e.spatialReference.isGeographic?(0,x.G7)(e):F,L=(0,E.qk)({vertexAttributes:{position:b.typedBuffer,normal:null===B||void 0===B?void 0:B.typedBuffer,tangent:null===C||void 0===C?void 0:C.typedBuffer},vertexSpace:k,spatialReference:e.spatialReference},F,{allowBufferReuse:!0,sourceUnit:"meters"});if(!L)throw new l.Z("loadGLTFMesh()","Failed to load mesh from glTF due to projection errors");return{transform:null,vertexSpace:F,components:w.components,spatialReference:e.spatialReference,vertexAttributes:new g.Q({...L,color:null===M||void 0===M?void 0:M.typedBuffer,uv:null===O||void 0===O?void 0:O.typedBuffer})}}function I(e,t){if(null==e)return"-";const n=e.typedBuffer;return"".concat((0,a.s1)(t,n.buffer,(()=>t.size)),"/").concat(n.byteOffset,"/").concat(n.byteLength)}function Z(e){return null!=e?e.toString():"-"}function j(e,t,n){t.writeVertices&&function(e,t){const{position:n,normal:o,tangent:r,color:l,texCoord0:a}=e.vertexAttributes,c=t.region.start,{attributes:f,transform:d}=t.gltf,p=f.position.count;if((0,T.d)(n.slice(c,p),f.position,d),null!=f.normal&&null!=o){const e=(0,u.XL)((0,i.Ue)(),d),t=o.slice(c,p);(0,T.c)(t,f.normal,e),(0,s.oc)(e)&&(0,T.e)(t,t)}else null!=o&&(0,B.f)(o,0,0,1,{dstIndex:c,count:p});if(null!=f.tangent&&null!=r){const e=(0,u.xO)((0,i.Ue)(),d),t=r.slice(c,p);(0,h.a)(t,f.tangent,e),(0,s.oc)(e)&&(0,h.n)(t,t)}else null!=r&&(0,C.f)(r,0,0,1,1,{dstIndex:c,count:p});if(null!=f.texCoord0&&null!=a?(0,b.a)(a.slice(c,p),f.texCoord0):null!=a&&(0,b.f)(a,0,0,{dstIndex:c,count:p}),null!=f.color&&null!=l){const e=f.color,t=l.slice(c,p);if(4===e.elementCount)e instanceof y.ek?(0,h.b)(t,e,255):e instanceof y.mc?(0,C.a)(t,e):e instanceof y.v6&&(0,h.b)(t,e,1/256);else{(0,C.f)(t,255,255,255,255);const n=y.ne.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof y.ct?(0,T.f)(n,e,255):e instanceof y.ne?(0,B.a)(n,e):e instanceof y.mw&&(0,T.f)(n,e,1/256)}}else null!=l&&(0,C.f)(l.slice(c,p),255,255,255,255)}(e,t);const{indices:o,attributes:r,primitiveType:l,material:a}=t.gltf;let c=(0,M.p)(o||r.position.count,l);const f=t.region.start;if(f){const e=new Uint32Array(c);for(let t=0;t<c.length;t++)e[t]+=f;c=e}e.components.push(new d.Z({name:t.gltf.name,faces:c,material:n.get(a),shading:r.normal?"source":"flat",trustSourceNormals:!0}))}function P(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function G(e){return{horizontal:L(e.s),vertical:L(e.t)}}function L(e){switch(e){case F.e8.CLAMP_TO_EDGE:return"clamp";case F.e8.MIRRORED_REPEAT:return"mirror";case F.e8.REPEAT:return"repeat"}}function U(e){return e**(1/O.j)*255}}}]);
//# sourceMappingURL=8883.a0a87ac2.chunk.js.map