{"version":3,"file":"static/js/7452.791fb52d.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/buildingSublayers/BuildingComponentSublayer.js","../node_modules/@arcgis/core/layers/buildingSublayers/BuildingGroupSublayer.js","../node_modules/@arcgis/core/layers/buildingSublayers/BuildingSublayer.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSublayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/i3s/BuildingFilterUtil.js","../node_modules/@arcgis/core/views/layers/BuildingComponentSublayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingComponentSublayerView3D.js","../node_modules/@arcgis/core/views/layers/BuildingSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSceneLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../Graphic.js\";import r from\"../../PopupTemplate.js\";import\"../../renderers/ClassBreaksRenderer.js\";import\"../../renderers/DictionaryRenderer.js\";import\"../../renderers/DotDensityRenderer.js\";import\"../../renderers/HeatmapRenderer.js\";import\"../../renderers/PieChartRenderer.js\";import\"../../renderers/Renderer.js\";import\"../../renderers/SimpleRenderer.js\";import\"../../renderers/UniqueValueRenderer.js\";import\"../../renderers/support/jsonUtils.js\";import{webSceneRendererTypes as o}from\"../../renderers/support/types.js\";import s from\"../../request.js\";import i from\"../../core/Error.js\";import{JSONMap as a}from\"../../core/jsonMap.js\";import n from\"../../core/Loadable.js\";import p from\"../../core/Logger.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{property as d}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{enumeration as u}from\"../../core/accessorSupport/decorators/enumeration.js\";import{reader as y}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";import m from\"../../geometry/Extent.js\";import h from\"../../geometry/SpatialReference.js\";import f from\"../FeatureLayer.js\";import g from\"./BuildingSublayer.js\";import{zeroCapabilities as j}from\"../support/capabilities.js\";import{popupEnabled as v}from\"../support/commonProperties.js\";import{defineFieldProperties as b}from\"../support/fieldProperties.js\";import L from\"../support/FieldsIndex.js\";import{unpackFieldNames as I}from\"../support/fieldUtils.js\";import{fetchIndexInfo as S}from\"../support/I3SIndexInfo.js\";import{I3SNodePageDefinition as F,I3SMaterialDefinition as w,I3STextureSetDefinition as O,I3SGeometryDefinition as x}from\"../support/I3SLayerDefinitions.js\";import P from\"../../rest/support/Query.js\";import{createPopupTemplate as q}from\"../../support/popupUtils.js\";import T from\"../../symbols/support/ElevationInfo.js\";import{queryAttributesFromCachedAttributesId as R}from\"../../views/3d/layers/i3s/I3SUtil.js\";import{getRequiredFields as U,getFetchPopupTemplate as D}from\"../../views/layers/support/popupUtils.js\";const Q=b();let E=class extends(n.LoadableMixin(l(g))){constructor(e){super(e),this.type=\"building-component\",this.nodePages=null,this.materialDefinitions=[],this.textureSetDefinitions=[],this.geometryDefinitions=[],this.indexInfo=null,this.serviceUpdateTimeStamp=null,this.store=null,this.attributeStorageInfo=[],this.fields=[],this.associatedLayer=null,this.outFields=null,this.listMode=\"show\",this.renderer=null,this.definitionExpression=null,this.popupEnabled=!0,this.popupTemplate=null,this.layerType=\"3d-object\"}get parsedUrl(){return this.layer?{path:`${this.layer.parsedUrl?.path}/sublayers/${this.id}`,query:this.layer.parsedUrl?.query}:{path:\"\"}}get fieldsIndex(){return new L(this.fields)}readAssociatedLayer(e,t){const r=this.layer.associatedFeatureServiceItem,o=t.associatedLayerID;return null!=r&&\"number\"==typeof o?new f({portalItem:r,customParameters:this.customParameters,layerId:o}):null}get objectIdField(){if(null!=this.fields)for(const e of this.fields)if(\"oid\"===e.type)return e.name;return null}get displayField(){return null!=this.associatedLayer?this.associatedLayer.displayField:void 0}get apiKey(){return this.layer.apiKey}get customParameters(){return this.layer.customParameters}get fullExtent(){return this.layer.fullExtent}get spatialReference(){return this.layer.spatialReference}get version(){return this.layer.version}get elevationInfo(){return this.layer.elevationInfo}get minScale(){return this.layer.minScale}get maxScale(){return this.layer.maxScale}get effectiveScaleRange(){return this.layer.effectiveScaleRange}get defaultPopupTemplate(){return this.createPopupTemplate()}load(e){const t=null!=e?e.signal:null,r=this._fetchService(t).then((()=>{this.indexInfo=S(this.parsedUrl.path,this.rootNode,this.nodePages,this.customParameters,this.apiKey,p.getLogger(this),t)}));return this.addResolvingPromise(r),Promise.resolve(this)}createPopupTemplate(e){return q(this,e)}async _fetchService(e){const t=(await s(this.parsedUrl.path,{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e})).data;this.read(t,{origin:\"service\",url:this.parsedUrl})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){const r=this.getFeatureType(t?.feature)?.domains?.[e];return r&&\"inherited\"!==r.type?r:this.getField(e)?.domain??null}getFeatureType(e){return e&&null!=this.associatedLayer?this.associatedLayer.getFeatureType(e):null}get types(){return null!=this.associatedLayer?this.associatedLayer.types??[]:[]}get typeIdField(){return null!=this.associatedLayer?this.associatedLayer.typeIdField:null}get geometryType(){return\"3d-object\"===this.layerType?\"mesh\":\"point\"}get profile(){return\"3d-object\"===this.layerType?\"mesh-pyramids\":\"points\"}get capabilities(){const e=null!=this.associatedLayer&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:j,{query:t,data:{supportsZ:r,supportsM:o,isVersioned:s}}=e;return{query:t,data:{supportsZ:r,supportsM:o,isVersioned:s}}}createQuery(){const e=new P;return\"mesh\"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||\"1=1\",e.sqlFormat=\"standard\",e}queryExtent(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryExtent(e||this.createQuery(),t)))}queryFeatureCount(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatureCount(e||this.createQuery(),t)))}queryFeatures(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatures(e||this.createQuery(),t))).then((e=>{if(e?.features)for(const t of e.features)t.layer=this.layer,t.sourceLayer=this;return e}))}queryObjectIds(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryObjectIds(e||this.createQuery(),t)))}async queryCachedAttributes(e,t){const r=I(this.fieldsIndex,await U(this,D(this)));return R(this.parsedUrl.path,this.attributeStorageInfo,e,t,r,this.apiKey,this.customParameters)}async queryCachedFeature(e,r){const o=await this.queryCachedAttributes(e,[r]);if(!o||0===o.length)throw new i(\"scenelayer:feature-not-in-cached-data\",\"Feature not found in cached data\");return new t({attributes:o[0],layer:this,sourceLayer:this})}getFieldUsageInfo(e){return this.fieldsIndex.has(e)?{supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1}:{supportsLabelingInfo:!1,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:null!=this.associatedLayer}}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return null!=e&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),null==this.associatedLayer)throw new i(\"buildingscenelayer:query-not-available\",\"BuildingSceneLayer component layer queries are not available without an associated feature layer\",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new i(\"buildingscenelayer:query-not-available\",\"BuildingSceneLayer associated feature layer could not be loaded\",{layer:this,error:e})}return this.associatedLayer}};e([d({readOnly:!0})],E.prototype,\"parsedUrl\",null),e([d({type:F,readOnly:!0})],E.prototype,\"nodePages\",void 0),e([d({type:[w],readOnly:!0})],E.prototype,\"materialDefinitions\",void 0),e([d({type:[O],readOnly:!0})],E.prototype,\"textureSetDefinitions\",void 0),e([d({type:[x],readOnly:!0})],E.prototype,\"geometryDefinitions\",void 0),e([d({readOnly:!0})],E.prototype,\"serviceUpdateTimeStamp\",void 0),e([d({readOnly:!0})],E.prototype,\"store\",void 0),e([d({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],E.prototype,\"rootNode\",void 0),e([d({readOnly:!0})],E.prototype,\"attributeStorageInfo\",void 0),e([d(Q.fields)],E.prototype,\"fields\",void 0),e([d({readOnly:!0})],E.prototype,\"fieldsIndex\",null),e([d({readOnly:!0,type:f})],E.prototype,\"associatedLayer\",void 0),e([y(\"service\",\"associatedLayer\",[\"associatedLayerID\"])],E.prototype,\"readAssociatedLayer\",null),e([d(Q.outFields)],E.prototype,\"outFields\",void 0),e([d({type:String,readOnly:!0})],E.prototype,\"objectIdField\",null),e([d({readOnly:!0,type:String,json:{read:!1}})],E.prototype,\"displayField\",null),e([d({readOnly:!0,type:String})],E.prototype,\"apiKey\",null),e([d({readOnly:!0,type:String})],E.prototype,\"customParameters\",null),e([d({readOnly:!0,type:m})],E.prototype,\"fullExtent\",null),e([d({readOnly:!0,type:h})],E.prototype,\"spatialReference\",null),e([d({readOnly:!0})],E.prototype,\"version\",null),e([d({readOnly:!0,type:T})],E.prototype,\"elevationInfo\",null),e([d({readOnly:!0,type:Number})],E.prototype,\"minScale\",null),e([d({readOnly:!0,type:Number})],E.prototype,\"maxScale\",null),e([d({readOnly:!0,type:Number})],E.prototype,\"effectiveScaleRange\",null),e([d({type:[\"hide\",\"show\"],json:{write:!0}})],E.prototype,\"listMode\",void 0),e([d({types:o,json:{origins:{service:{read:{source:\"drawingInfo.renderer\"}}},name:\"layerDefinition.drawingInfo.renderer\",write:!0},value:null})],E.prototype,\"renderer\",void 0),e([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:\"layerDefinition.definitionExpression\",write:{enabled:!0,allowNull:!0}}})],E.prototype,\"definitionExpression\",void 0),e([d(v)],E.prototype,\"popupEnabled\",void 0),e([d({type:r,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\"}}})],E.prototype,\"popupTemplate\",void 0),e([d({readOnly:!0,type:String,json:{origins:{service:{read:{source:\"store.normalReferenceFrame\"}}},read:!1}})],E.prototype,\"normalReferenceFrame\",void 0),e([d({readOnly:!0,json:{read:!1}})],E.prototype,\"defaultPopupTemplate\",null),e([d()],E.prototype,\"types\",null),e([d()],E.prototype,\"typeIdField\",null),e([d({json:{write:!1}}),u(new a({\"3DObject\":\"3d-object\",Point:\"point\"}))],E.prototype,\"layerType\",void 0),e([d()],E.prototype,\"geometryType\",null),e([d()],E.prototype,\"profile\",null),e([d({readOnly:!0,json:{read:!1}})],E.prototype,\"capabilities\",null),e([d({readOnly:!0})],E.prototype,\"statisticsInfo\",void 0),E=e([c(\"esri.layers.buildingSublayers.BuildingComponentSublayer\")],E);const A=E;export{A as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import{loadAllChildren as o}from\"../../core/loadAll.js\";import s from\"../../core/Warning.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import n from\"./BuildingComponentSublayer.js\";import u from\"./BuildingSublayer.js\";var a;const l={type:e,readOnly:!0,json:{origins:{service:{read:{source:\"sublayers\",reader:p}}},read:!1}};function p(r,o,t){if(r&&Array.isArray(r))return new e(r.map((r=>{const e=y(r);if(e){const o=new e;return o.read(r,t),o}return t?.messages&&r&&t.messages.push(new s(\"building-scene-layer:unsupported-sublayer-type\",\"Building scene sublayer of type '\"+(r.type||\"unknown\")+\"' are not supported\",{definition:r,context:t})),null})))}let c=a=class extends u{constructor(r){super(r),this.type=\"building-group\",this.listMode=\"show\",this.sublayers=null}loadAll(){return o(this,(r=>a.forEachSublayer(this.sublayers,(e=>{\"building-group\"!==e.type&&r(e)}))))}};function y(r){return\"group\"===r.layerType?c:n}r([t({type:[\"hide\",\"show\",\"hide-children\"],json:{write:!0}})],c.prototype,\"listMode\",void 0),r([t(l)],c.prototype,\"sublayers\",void 0),c=a=r([i(\"esri.layers.buildingSublayers.BuildingGroupSublayer\")],c),function(r){function e(r,o){r.forEach((r=>{o(r),\"building-group\"===r.type&&e(r.sublayers,o)}))}r.sublayersProperty=l,r.readSublayers=p,r.forEachSublayer=e}(c||(c={}));const d=c;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{IdentifiableMixin as o}from\"../../core/Identifiable.js\";import{MultiOriginJSONSupport as r}from\"../../core/MultiOriginJSONSupport.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{Integer as i}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/RandomLCG.js\";import\"../../core/has.js\";import{reader as s}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{readOnlyService as l}from\"../support/commonProperties.js\";let n=class extends(o(r)){constructor(e){super(e),this.title=\"\",this.id=-1,this.modelName=null,this.isEmpty=null,this.legendEnabled=!0,this.visible=!0,this.opacity=1}readTitle(e,o){return\"string\"==typeof o.alias?o.alias:\"string\"==typeof o.name?o.name:\"\"}readIdOnlyOnce(e){return-1!==this.id?this.id:\"number\"==typeof e?e:-1}};e([t({type:String,json:{origins:{\"web-scene\":{write:!0},\"portal-item\":{write:!0}}}})],n.prototype,\"title\",void 0),e([s(\"service\",\"title\",[\"alias\",\"name\"])],n.prototype,\"readTitle\",null),e([t()],n.prototype,\"layer\",void 0),e([t({type:i,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],n.prototype,\"id\",void 0),e([s(\"service\",\"id\")],n.prototype,\"readIdOnlyOnce\",null),e([t(l(String))],n.prototype,\"modelName\",void 0),e([t(l(Boolean))],n.prototype,\"isEmpty\",void 0),e([t({type:Boolean,nonNullable:!0})],n.prototype,\"legendEnabled\",void 0),e([t({type:Boolean,json:{name:\"visibility\",write:!0}})],n.prototype,\"visible\",void 0),e([t({type:Number,json:{write:!0}})],n.prototype,\"opacity\",void 0),n=e([p(\"esri.layers.buildingSublayers.BuildingSublayer\")],n);const a=n;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Evented.js\";import{IdentifiableMixin as r}from\"../../../core/Identifiable.js\";import{EsriPromiseMixin as s}from\"../../../core/Promise.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";const p=(p,l)=>{let n=class extends(s(r(t.EventedMixin(p)))){constructor(e){super(e),this.sublayer=null,this.parent=null,this.view=null}initialize(){}get suspended(){return!this.canResume()}get updating(){return!this.suspended&&this.isUpdating()}get visible(){return!!this.sublayer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get fullOpacity(){const e=e=>null!=e?e:1;return e(this.sublayer?.opacity)*e(this.parent?.fullOpacity)}canResume(){return!this.parent?.suspended&&this.view?.ready&&this.visible||!1}isUpdating(){return!1}};return e([i()],n.prototype,\"sublayer\",void 0),e([i()],n.prototype,\"parent\",void 0),e([i({readOnly:!0})],n.prototype,\"suspended\",null),e([i({type:Boolean,readOnly:!0})],n.prototype,\"updating\",null),e([i()],n.prototype,\"view\",void 0),e([i()],n.prototype,\"visible\",null),e([i()],n.prototype,\"fullOpacity\",null),n=e([o(\"esri.views.3d.layers.BuildingSublayerView3D\")],n),n};export{p as BuildingSublayerView3DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{createMaterialFromEdges as r}from\"../support/edgeUtils.js\";import{ColorMixModeEnum as o}from\"../support/symbolColorUtils.js\";var a;!function(e){e[e.Solid=0]=\"Solid\",e[e.WireFrame=1]=\"WireFrame\",e[e.XRay=2]=\"XRay\"}(a||(a={}));const l=.15,t=.5*l;function i(e){switch(e.filterMode.type){case\"solid\":return{mode:a.Solid};case\"wire-frame\":return{mode:a.WireFrame,edgeMaterial:r(e.filterMode.edges,{})};case\"x-ray\":return{mode:a.XRay}}}function c(e,r){if(null==r)return e.color[3]=0,e.edgeMaterial=null,void(e.pickable=!1);switch(r.mode){case a.Solid:return;case a.WireFrame:return e.color[3]=0,e.edgeMaterial=r.edgeMaterial,void(e.pickable=!1);case a.XRay:return e.color[0]=1,e.color[1]=1,e.color[2]=1,e.color[3]*=l,e.colorMixMode=o.Replace,e.castShadows=!1,e.pickable=!1,void(e.edgeMaterial=n(e.edgeMaterial))}}function n(e){return null==e?null:(d.lastMaterial!==e&&(d.cachedMaterial=s(e),d.lastMaterial=e),d.cachedMaterial)}function s(r){const o=e(r.color);return o[3]*=t,{...r,color:o}}const d={cachedMaterial:null,lastMaterial:null};export{a as FilterModeEnum,c as applyFilterMode,i as parseFilterMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";class o extends e{constructor(){super(...arguments),this.sublayer=null}get updating(){return!1}get suspended(){return!1}get availableFields(){return[]}get filter(){return null}set filter(r){throw new Error(\"Not implemented\")}queryFeatures(r,e){throw new Error(\"Not implemented\")}queryObjectIds(r,e){throw new Error(\"Not implemented\")}queryFeatureCount(r,e){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(r,e){throw new Error(\"Not implemented\")}highlight(r){throw new Error(\"Not implemented\")}}r([t()],o.prototype,\"sublayer\",void 0),r([t()],o.prototype,\"availableFields\",null),r([t()],o.prototype,\"filter\",null);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{destroyMaybe as s}from\"../../../core/maybe.js\";import{throwIfAborted as l,throwIfAbortError as a}from\"../../../core/promiseUtils.js\";import{syncAndInitial as n,initial as o}from\"../../../core/reactiveUtils.js\";import{property as u}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as p}from\"../../../core/sql/WhereClause.js\";import\"../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import h from\"../../../layers/support/FeatureFilter.js\";import{fixFields as y,unpackFieldNames as c,populateMissingFields as f}from\"../../../layers/support/fieldUtils.js\";import g from\"../../../rest/support/Query.js\";import{BuildingSublayerView3DMixin as m}from\"./BuildingSublayerView3D.js\";import{I3SMeshView3D as F}from\"./I3SMeshView3D.js\";import{ForAllFeaturesMode as b}from\"./II3SMeshView3D.js\";import{applyFilterMode as _}from\"./i3s/BuildingFilterUtil.js\";import{createGetFeatureExtent as E}from\"./i3s/I3SGeometryUtil.js\";import{I3SMeshViewFilter as w}from\"./i3s/I3SMeshViewFilter.js\";import{I3SQueryEngine as x}from\"./i3s/I3SQueryEngine.js\";import{I3SQueryFeatureAdapter as S}from\"./i3s/I3SQueryFeatureAdapter.js\";import{I3SQueryFeatureStore as j}from\"./i3s/I3SQueryFeatureStore.js\";import{findFieldsCaseInsensitive as v,getIndexCrs as I}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as Q}from\"./support/DefinitionExpressionSceneLayerView.js\";import{TemporalSceneLayerView as q}from\"./support/TemporalSceneLayerView.js\";import R from\"../../layers/BuildingComponentSublayerView.js\";import{hasPopupTemplate as L,getRequiredFields as V,getFetchPopupTemplate as U}from\"../../layers/support/popupUtils.js\";import{isInEffectiveScaleRange as A}from\"../../support/layerViewUtils.js\";import{TaskPriority as C}from\"../../support/Scheduler.js\";let H=class extends(q(Q(F(m(R))))){constructor(){super(...arguments),this.type=\"building-component-sublayer-3d\",this.layerView=null,this._elevationContext=\"scene\",this._isIntegratedMesh=!1,this._supportsLabeling=!1,this.requiredFields=[],this.progressiveLoadFactor=1,this._queryEngine=null}get i3slayer(){return this.sublayer}get layerUid(){return this.sublayer.layer.uid}get sublayerUid(){return this.sublayer.uid}get layerId(){return this.sublayer.layer.id}get sublayerId(){return this.sublayer.id}get layerPopupEnabledAndHasTemplate(){return this.sublayer.popupEnabled&&L(this.sublayer,this.layerView?.view.popup?.defaultPopupTemplateEnabled)}initialize(){this._updatingHandles.add((()=>this.mergedFilter),(e=>{null!=e&&w.checkSupport(e)?null==this._i3sFilter?this._i3sFilter=new w({viewFilter:e,layerFieldsIndex:this.sublayer.fieldsIndex,loadAsyncModule:e=>this._loadAsyncModule(e),addSqlFilter:(e,r)=>this.addSqlFilter(e,r,this.logError),addTimeFilter:(e,r)=>this.addTimeFilter(e,r)}):this._i3sFilter.viewFilter=e:this._i3sFilter=s(this._i3sFilter)}),n),this._updatingHandles.add((()=>[this.sublayer.renderer,this.definitionExpressionFields,this.filterExpressionFields]),(()=>this._updateRequiredFields())),this._updatingHandles.add((()=>this.sublayer.renderer),(e=>this._rendererChange(e)),o);const e=()=>this._filterChange();this._updatingHandles.add((()=>this.parsedDefinitionExpression),e),this._updatingHandles.add((()=>this._i3sFilter?.sortedObjectIds),e),this._updatingHandles.add((()=>this._i3sFilter?.parsedWhereClause),e),this._updatingHandles.add((()=>this.getTimeFilterDependencies()),e),this._updatingHandles.add((()=>this.mergedFilter),e),this._updatingHandles.add((()=>[this._i3sFilter?.parsedGeometry,this.filter?.spatialRelationship]),(()=>this._geometryFilterChange())),this._updatingHandles.add((()=>this.parsedFilterExpressions),(()=>this._updateSymbologyOverride()),o),this.addResolvingPromise(this._updateRequiredFields())}get lodFactor(){return this.view.qualitySettings.sceneService.object.lodFactor}get parsedFilterExpressions(){return\"Overview\"!==this.sublayer.modelName&&this.layerView?this.layerView.filterExpressions.map((([e,r])=>{let t;try{t=p.create(e,{fieldsIndex:this.sublayer.fieldsIndex})}catch(a){return i.getLogger(this).error(\"Failed to parse filterExpression: \"+a),null}if(!t.isStandardized)return i.getLogger(this).error(\"filterExpression is using non standard function\"),null;const s=[],l=t.fieldNames;return v(l,this.sublayer.fields,{missingFields:s}),s.length>0?(i.getLogger(this).error(`filterExpression references unknown fields: ${s.join(\", \")}`),null):[t,r]})).filter((e=>null!=e)):[]}get filter(){return this._get(\"filter\")}set filter(e){this._set(\"filter\",w.checkSupport(e)?e:null)}isUpdating(){return super.isUpdating()||(this._i3sFilter?.updating??!1)}_updateSymbologyOverride(){const e=this.parsedFilterExpressions;e.length>0?this._setSymbologyOverride(((r,t)=>{for(const[s,l]of e)try{if(s.testFeature(r))return _(t,l)}catch(i){this.logError(i)}return _(t,null)}),this.filterExpressionFields):this._setSymbologyOverride(null,null)}get filterExpressionFields(){return y(this.sublayer.fieldsIndex,this.parsedFilterExpressions.reduce(((e,[r])=>e.concat(r.fieldNames)),new Array))}get availableFields(){const e=this.sublayer,r=e.fieldsIndex;let t=this.requiredFields;if(e.outFields||e.layer.outFields){const i=[...e.outFields||[],...e.layer.outFields||[]];t=[...c(r,i),...t]}return y(r,t)}_createLayerGraphic(e){return new r({attributes:e,layer:this.sublayer.layer,sourceLayer:this.sublayer})}canResume(){return super.canResume()&&A(this.i3slayer.effectiveScaleRange,this.view.scale)&&(!this._controller||this._controller.rootNodeVisible)}async fetchPopupFeaturesFromGraphics(e,r){const t=this._validateFetchPopupFeatures(r);if(t)throw t;if(0===e.length)return[];const s=[],n=[],o=null!=this.sublayer.associatedLayer?await this.sublayer.associatedLayer.load(r):this.sublayer,u=c(this.sublayer.fieldsIndex,await V(o,U(this.sublayer,r)));l(r);const d=new Set;for(const i of e)f(u,i,d)?n.push(i):s.push(i);return 0===n.length?s:(null!=this.sublayer.associatedLayer&&await this.sublayer.associatedLayer.load().catch((()=>i.getLogger(this).warn(\"Failed to load associated feature layer. Displaying popup attributes from cached attributes.\"))),this.whenGraphicAttributes(n,Array.from(d)).catch((e=>(a(e),n))).then((e=>s.concat(e))))}async _updateRequiredFields(){const e=y(this.sublayer.fieldsIndex,[...this.sublayer.renderer?await this.sublayer.renderer.getRequiredFields(this.sublayer.fieldsIndex):[],...this.definitionExpressionFields,...this.filterExpressionFields]);this._set(\"requiredFields\",e)}_validateFetchPopupFeatures(e){const{sublayer:r}=this,{popupEnabled:i}=r;return i?U(r,e)?void 0:new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{sublayer:r}):new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{sublayer:r})}getFilters(){const e=super.getFilters();return this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),this._i3sFilter?.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}createQuery(){const e={outFields:[\"*\"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new g(e)}queryExtent(e,r){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),r?.signal)}queryFeatureCount(e,r){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),r?.signal)}queryFeatures(e,r){return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),r?.signal).then((e=>{if(!e?.features)return e;const r=this.sublayer,t=r.layer;for(const i of e.features)i.layer=t,i.sourceLayer=r;return e}))}queryObjectIds(e,r){return this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),r?.signal)}_ensureQueryEngine(){return null==this._queryEngine&&(this._queryEngine=this._createQueryEngine()),this._queryEngine}_createQueryEngine(){const e=E(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new x({layerView:this,priority:C.FEATURE_QUERY_ENGINE,spatialIndex:new j({featureAdapter:new S({objectIdField:this.sublayer.objectIdField,attributeStorageInfo:this.sublayer.attributeStorageInfo,getFeatureExtent:e}),forAllFeatures:(e,r)=>this._forAllFeatures(((r,t,i)=>e({id:r,index:t,meta:i})),r,b.QUERYABLE),getFeatureExtent:e,sourceSpatialReference:I(this.sublayer),viewSpatialReference:this.view.spatialReference})})}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():g.from(e))}};e([u()],H.prototype,\"i3slayer\",null),e([u()],H.prototype,\"layerView\",void 0),e([u()],H.prototype,\"lodFactor\",null),e([u({readOnly:!0})],H.prototype,\"parsedFilterExpressions\",null),e([u({type:h})],H.prototype,\"filter\",null),e([u()],H.prototype,\"_i3sFilter\",void 0),e([u({type:[String],readOnly:!0})],H.prototype,\"filterExpressionFields\",null),e([u({type:[String],readOnly:!0})],H.prototype,\"requiredFields\",void 0),e([u({type:[String],readOnly:!0})],H.prototype,\"availableFields\",null),H=e([d(\"esri.views.3d.layers.BuildingComponentSublayerView3D\")],H);const O=H;export{O as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";import e from\"./LayerView.js\";class s extends e{constructor(r){super(r),this.layer=null,this.sublayerViews=null}highlight(r){throw new Error(\"Not implemented\")}}r([o()],s.prototype,\"layer\",void 0),r([o()],s.prototype,\"sublayerViews\",void 0);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{a7 as r,C as t}from\"../../../chunks/languageUtils.js\";import s from\"../../../core/Accessor.js\";import i from\"../../../core/Collection.js\";import{handlesGroup as o}from\"../../../core/handleUtils.js\";import n from\"../../../core/Logger.js\";import{getOrCreateMapValue as l}from\"../../../core/MapUtils.js\";import{abortMaybe as a}from\"../../../core/maybe.js\";import{isAbortError as u,allSettledValues as p,throwIfAborted as h,createResolver as c}from\"../../../core/promiseUtils.js\";import{watch as y,syncAndInitial as d}from\"../../../core/reactiveUtils.js\";import{property as g}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as f}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../layers/buildingSublayers/BuildingGroupSublayer.js\";import m from\"./BuildingComponentSublayerView3D.js\";import{BuildingSublayerView3DMixin as w}from\"./BuildingSublayerView3D.js\";import{LayerView3D as b}from\"./LayerView3D.js\";import{parseFilterMode as V}from\"./i3s/BuildingFilterUtil.js\";import{checkSpatialReference as j}from\"./i3s/I3SUtil.js\";import{emptyHighlightHandle as C,normalizeHighlightTargetExceptQuery as _}from\"./support/highlightUtils.js\";import{LayerViewPerformanceInfo as S}from\"./support/LayerViewPerformanceInfo.js\";import{updatingProgress as v}from\"../support/updatingProperties.js\";import B from\"../../layers/BuildingSceneLayerView.js\";import{isInEffectiveScaleRange as L}from\"../../support/layerViewUtils.js\";const F=w(s);let M=class extends(b(B)){constructor(e){super(e),this.type=\"building-scene-3d\",this.sublayerViews=new i,this._abortController=new AbortController,this._loadingComponents=0,this._pendingWhenSublayerViews=new Map,this.ignoresMemoryFactor=!1}get filterExpression(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null,t=null!=r?r.filterBlocks?.find((e=>\"solid\"===e.filterMode.type)):null;return t?t.filterExpression:null}get filterExpressions(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null;return r?.filterBlocks?r.filterBlocks.toArray().map((e=>[e.filterExpression??\"\",V(e)])):[]}get updatingProgressValue(){const e=this.sublayerViews,r=this._loadingComponents+(e?e.length:0);return e.reduce(((e,r)=>e+r.updatingProgress),0)/r}get visibleAtCurrentScale(){return L(this.layer.effectiveScaleRange,this.view.scale)}isUpdating(){return this._loadingComponents>0||this.sublayerViews&&this.sublayerViews.some((e=>e.updating))}initialize(){j(this.layer.spatialReference,this.view.spatialReference,this.view.viewingMode),this._initializeSubLayerViews(this.layer.sublayers,this)}destroy(){this.sublayerViews&&(this.sublayerViews.forEach((e=>e.destroy())),this.sublayerViews=null),this._abortController=a(this._abortController)}_initializeSubLayerViews(e,r){const t=this,s=this.view;e.forEach((e=>{if(!e.isEmpty)if(\"building-group\"===e.type){const t=new F({sublayer:e,view:s,parent:r});this._initializeSubLayerViews(e.sublayers,t)}else\"mesh\"===e.geometryType&&(this._loadingComponents++,e.load({signal:this._abortController.signal}).then((()=>{const i=new m({sublayer:e,layerView:t,view:s,parent:r});this.sublayerViews.push(i);const o=this._pendingWhenSublayerViews.get(e);if(o){for(const e of o)e.resolve(i);this._pendingWhenSublayerViews.delete(e)}this.addHandles([y((()=>i.updating),(()=>this.notifyChange(\"updating\")),d),y((()=>i.updatingProgress),(()=>this.notifyChange(\"updatingProgressValue\")),d)])})).catch((r=>{u(r)||n.getLogger(this).error(`Error while creating view for sublayer ${e.id}\\nLayer: ${this.layer.url}\\n`,r)})).then((()=>{this._loadingComponents--,this.notifyChange(\"updating\"),this.notifyChange(\"updatingProgressValue\")})))}))}getGraphicFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getGraphicFromIntersectorTarget(e);return null}async fetchPopupFeaturesFromGraphics(e,r){if(0===e.length)return[];const t=P(e,(e=>e.sourceLayer)),s=[];for(const[o,n]of t){const e=this._findComponent(o);null!=e&&s.push(e.fetchPopupFeaturesFromGraphics(n,r))}const i=await p(s);return h(r),i.flat()}whenGraphicBounds(e){const r=this._findComponent(e.sourceLayer);return null==r?Promise.reject():r.whenGraphicBounds(e)}getAABBFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getAABBFromIntersectorTarget(e);return null}async whenSublayerView(e){const r=this._findComponent(e);if(null!=r)return r;const t=this._pendingWhenSublayerViews.get(e),s=c();return t?t.push(s):this._pendingWhenSublayerViews.set(e,[s]),s.promise}_findComponent(e){return this.sublayerViews.find((r=>e===r.sublayer))}highlight(e,s){if(r(e))return C;const i=_(e);if(0===i.length)return C;if(t(i[0])){const e=i,r=new Map;for(const s of e)l(r,s.sourceLayer,(()=>[])).push(s);const t=[];return this.sublayerViews.forEach((e=>{const i=r.get(e.sublayer);i&&t.push(e.highlight(i,s))})),o(t)}return C}get usedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.usedMemory),0)}get unloadedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.unloadedMemory),0)}get performanceInfo(){return new S(this.usedMemory)}};function P(e,r){const t=new Map,s=e.length;for(let i=0;i<s;i++){const s=e[i],o=r(s,i,e),n=t.get(o);n?n.push(s):t.set(o,[s])}return t}e([g()],M.prototype,\"sublayerViews\",void 0),e([g({readOnly:!0})],M.prototype,\"filterExpression\",null),e([g({readOnly:!0})],M.prototype,\"filterExpressions\",null),e([g(v)],M.prototype,\"updatingProgress\",void 0),e([g({readOnly:!0,dependsOn:[]})],M.prototype,\"updatingProgressValue\",null),e([g({readOnly:!0})],M.prototype,\"visibleAtCurrentScale\",null),M=e([f(\"esri.views.3d.layers.BuildingSceneLayerView3D\")],M);const U=M;export{U as default};\n"],"names":["Q","b","E","n","LoadableMixin","l","g","constructor","e","super","this","type","nodePages","materialDefinitions","textureSetDefinitions","geometryDefinitions","indexInfo","serviceUpdateTimeStamp","store","attributeStorageInfo","fields","associatedLayer","outFields","listMode","renderer","definitionExpression","popupEnabled","popupTemplate","layerType","parsedUrl","_this$layer$parsedUrl","_this$layer$parsedUrl2","layer","path","concat","id","query","fieldsIndex","L","readAssociatedLayer","t","r","associatedFeatureServiceItem","o","associatedLayerID","f","portalItem","customParameters","layerId","objectIdField","name","displayField","apiKey","fullExtent","spatialReference","version","elevationInfo","minScale","maxScale","effectiveScaleRange","defaultPopupTemplate","createPopupTemplate","load","signal","_fetchService","then","S","rootNode","p","getLogger","addResolvingPromise","Promise","resolve","q","s","token","responseType","data","read","origin","url","getField","get","getFieldDomain","_this$getFeatureType","_this$getField$domain","_this$getField","getFeatureType","feature","domains","domain","types","_this$associatedLayer","typeIdField","geometryType","profile","capabilities","j","supportsZ","supportsM","isVersioned","createQuery","P","returnGeometry","returnZ","where","sqlFormat","queryExtent","_getAssociatedLayerForQuery","queryFeatureCount","queryFeatures","features","sourceLayer","queryObjectIds","queryCachedAttributes","I","U","D","R","queryCachedFeature","length","i","attributes","getFieldUsageInfo","has","supportsLabelingInfo","supportsRenderer","supportsPopupTemplate","supportsLayerQuery","loaded","_loadAssociatedLayerForQuery","error","d","readOnly","prototype","F","w","O","x","String","json","source","y","m","h","T","Number","write","origins","service","value","enabled","allowNull","v","target","u","a","Point","c","A","reader","Array","isArray","map","messages","push","definition","context","sublayers","loadAll","forEachSublayer","sublayersProperty","readSublayers","forEach","title","modelName","isEmpty","legendEnabled","visible","opacity","readTitle","alias","readIdOnlyOnce","ignoreOrigin","Boolean","nonNullable","EventedMixin","sublayer","parent","view","initialize","suspended","canResume","updating","isUpdating","_this$sublayer","_overrideIfSome","fullOpacity","_this$sublayer2","_this$parent","_this$parent2","_this$view","ready","Solid","WireFrame","XRay","filterMode","mode","edgeMaterial","edges","color","pickable","colorMixMode","Replace","castShadows","lastMaterial","cachedMaterial","arguments","availableFields","filter","Error","highlight","H","layerView","_elevationContext","_isIntegratedMesh","_supportsLabeling","requiredFields","progressiveLoadFactor","_queryEngine","i3slayer","layerUid","uid","sublayerUid","sublayerId","layerPopupEnabledAndHasTemplate","_this$layerView","popup","defaultPopupTemplateEnabled","_updatingHandles","add","mergedFilter","checkSupport","_i3sFilter","viewFilter","layerFieldsIndex","loadAsyncModule","_loadAsyncModule","addSqlFilter","logError","addTimeFilter","definitionExpressionFields","filterExpressionFields","_updateRequiredFields","_rendererChange","_filterChange","parsedDefinitionExpression","_this$_i3sFilter","sortedObjectIds","_this$_i3sFilter2","parsedWhereClause","getTimeFilterDependencies","_this$_i3sFilter3","_this$filter","parsedGeometry","spatialRelationship","_geometryFilterChange","parsedFilterExpressions","_updateSymbologyOverride","lodFactor","qualitySettings","sceneService","object","filterExpressions","_ref","create","isStandardized","fieldNames","missingFields","join","_get","_set","_this$_i3sFilter$upda","_this$_i3sFilter4","_setSymbologyOverride","testFeature","_","reduce","_ref2","_createLayerGraphic","scale","_controller","rootNodeVisible","fetchPopupFeaturesFromGraphics","_validateFetchPopupFeatures","V","Set","catch","warn","whenGraphicAttributes","from","getRequiredFields","getFilters","_this$_i3sFilter5","addFilters","crsIndex","_collection","outSpatialReference","_ensureQueryEngine","executeQueryForExtent","_ensureQuery","executeQueryForCount","executeQuery","executeQueryForIds","_createQueryEngine","renderSpatialReference","priority","C","FEATURE_QUERY_ENGINE","spatialIndex","featureAdapter","getFeatureExtent","forAllFeatures","_forAllFeatures","index","meta","QUERYABLE","sourceSpatialReference","viewSpatialReference","_addDefinitionExpressionToQuery","sublayerViews","M","B","_abortController","AbortController","_loadingComponents","_pendingWhenSublayerViews","Map","ignoresMemoryFactor","filterExpression","_r$filterBlocks","activeFilterId","filters","find","filterBlocks","toArray","_e$filterExpression","updatingProgressValue","updatingProgress","visibleAtCurrentScale","some","viewingMode","_initializeSubLayerViews","destroy","delete","addHandles","notifyChange","getGraphicFromIntersectorTarget","items","set","_findComponent","flat","whenGraphicBounds","reject","getAABBFromIntersectorTarget","whenSublayerView","promise","usedMemory","unloadedMemory","performanceInfo","dependsOn"],"sourceRoot":""}