"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[9762,7009],{67009:(e,t,n)=>{n.d(t,{EdgeInputBufferLayout:()=>i,Hr:()=>u,dG:()=>l,dx:()=>a,k3:()=>f,rD:()=>c});var o=n(50256),s=n(55158),r=n(4760);const i=(0,s.U$)().vec3f(r.T.POSITION).u16(r.T.COMPONENTINDEX).freeze(),c=(0,s.U$)().vec2u8(r.T.SIDENESS).freeze(),a=(0,o.K)(c),l=(0,s.U$)().vec3f(r.T.POSITION0).vec3f(r.T.POSITION1).vec2i16(r.T.NORMALCOMPRESSED).u16(r.T.COMPONENTINDEX).u8(r.T.VARIANTOFFSET,{glNormalized:!0}).u8(r.T.VARIANTSTROKE).u8(r.T.VARIANTEXTENSION,{glNormalized:!0}).freeze(),u=(0,s.U$)().vec3f(r.T.POSITION0).vec3f(r.T.POSITION1).vec2i16(r.T.NORMALCOMPRESSED).vec2i16(r.T.NORMAL2COMPRESSED).u16(r.T.COMPONENTINDEX).u8(r.T.VARIANTOFFSET,{glNormalized:!0}).u8(r.T.VARIANTSTROKE).u8(r.T.VARIANTEXTENSION,{glNormalized:!0}).freeze(),f=new Map([[r.T.POSITION0,0],[r.T.POSITION1,1],[r.T.COMPONENTINDEX,2],[r.T.VARIANTOFFSET,3],[r.T.VARIANTSTROKE,4],[r.T.VARIANTEXTENSION,5],[r.T.NORMALCOMPRESSED,6],[r.T.NORMAL2COMPRESSED,7],[r.T.SIDENESS,8]])},41371:(e,t,n)=>{n.d(t,{D:()=>T,q:()=>I});var o=n(84936),s=n(32035),r=n(12400),i=n(50256),c=n(52920),a=n(67009);class l{updateSettings(e){this.settings=e,this._edgeHashFunction=e.reducedPrecision?g:h}write(e,t,n){S.seed=this._edgeHashFunction(n);const o=S.getIntRange(0,255),s=S.getIntRange(0,this.settings.variants-1),r=S.getFloat(),i=255*(.5*function(e,t){return Math.abs(e)**t*Math.sign(e)}(-(1-Math.min(r/.7,1))+Math.max(0,r-.7)/(1-.7),1.2)+.5);e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex),e.variantOffset.set(t,o),e.variantStroke.set(t,s),e.variantExtension.set(t,i)}}const u=new Float32Array(6),f=new Uint32Array(u.buffer),d=new Uint32Array(1);function h(e){return u[0]=e.position0[0],u[1]=e.position0[1],u[2]=e.position0[2],u[3]=e.position1[0],u[4]=e.position1[1],u[5]=e.position1[2],d[0]=31*(31*(31*(31*(31*(166811+f[0])+f[1])+f[2])+f[3])+f[4])+f[5],d[0]}function g(e){const t=u;t[0]=N(e.position0[0]),t[1]=N(e.position0[1]),t[2]=N(e.position0[2]),t[3]=N(e.position1[0]),t[4]=N(e.position1[1]),t[5]=N(e.position1[2]),d[0]=5381;for(let n=0;n<f.length;n++)d[0]=31*d[0]+f[n];return d[0]}const p=1e4;function N(e){return Math.round(e*p)/p}class T{constructor(){this._commonWriter=new l}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return a.dG.createBuffer(e)}write(e,t,n){this._commonWriter.write(e,t,n),(0,s.g)(O,n.faceNormal0,n.faceNormal1),(0,s.n)(O,O);const{typedBuffer:o,typedBufferStride:r}=e.normalCompressed;(0,c.hd)(o,t,O[0],O[1],O[2],r)}}T.Layout=a.dG,T.glLayout=(0,i.K)(a.dG,1);class I{constructor(){this._commonWriter=new l}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return a.Hr.createBuffer(e)}write(e,t,n){this._commonWriter.write(e,t,n);{const{typedBuffer:o,typedBufferStride:s}=e.normalCompressed;(0,c.hd)(o,t,n.faceNormal0[0],n.faceNormal0[1],n.faceNormal0[2],s)}{const{typedBuffer:o,typedBufferStride:s}=e.normal2Compressed;(0,c.hd)(o,t,n.faceNormal1[0],n.faceNormal1[1],n.faceNormal1[2],s)}}}I.Layout=a.Hr,I.glLayout=(0,i.K)(a.Hr,1);const O=(0,r.Ue)(),S=new o.Z},32666:(e,t,n)=>{n.d(t,{n:()=>a});var o=n(16889),s=n(10199),r=n(32035),i=n(12400);const c=-1;function a(e,t,n){const o=e.vertices.position,s=e.vertices.componentIndex,i=p.position0,a=p.position1,f=p.faceNormal0,h=p.faceNormal1,{edges:g,normals:N}=u(e),T=g.length/4,I=t.allocate(T);let O=0;const S=T,E=null===n||void 0===n?void 0:n.allocate(S);let v=0,y=0,R=0;d.length=0;for(let c=0;c<T;++c){const e=4*c;o.getVec(g.data[e],i),o.getVec(g.data[e+1],a);const t=d.pushNew();t.index=4*c,t.length=(0,r.j)(i,a)}d.sort(((e,t)=>t.length-e.length));const M=new Array,P=new Array;d.forAll((e=>{let{length:u,index:d}=e;const T=g.data[d],S=g.data[d+1],U=g.data[d+2],V=g.data[d+3],D=V===c;if(o.getVec(T,i),o.getVec(S,a),D){const e=3*U;(0,r.i)(f,N.data[e],N.data[e+1],N.data[e+2]),(0,r.c)(h,f),p.componentIndex=s.get(T),p.cosAngle=(0,r.f)(f,h)}else{let e=3*U;if((0,r.i)(f,N.data[e],N.data[e+1],N.data[e+2]),e=3*V,(0,r.i)(h,N.data[e],N.data[e+1],N.data[e+2]),p.componentIndex=s.get(T),p.cosAngle=(0,r.f)(f,h),function(e,t){return e.cosAngle>t}(p,A))return;p.cosAngle<-.9999&&(0,r.c)(h,f)}y+=u,R++,D||function(e,t){return e.cosAngle<t}(p,w)?(t.write(I,O++,p),M.push(u)):l(p,m)&&(E&&n&&n.write(E,v++,p),P.push(u))}));const U=new Float32Array(M.reverse()),V=new Float32Array(P.reverse()),D=E&&n?{instancesData:E.slice(0,v),lodInfo:{lengths:V}}:void 0;return{regular:{instancesData:I.slice(0,O),lodInfo:{lengths:U}},silhouette:D,averageEdgeLength:y/R}}function l(e,t){const n=(0,o.ZF)(e.cosAngle);return(0,r.o)(T,e.position1,e.position0),n*((0,r.f)((0,r.e)(N,e.faceNormal0,e.faceNormal1),T)>0?-1:1)>t}function u(e){const t=e.faces.length/3,n=e.faces,o=e.neighbors,s=e.vertices.position;h.length=g.length=0;for(let i=0;i<t;i++){const e=3*i,t=o[e],a=o[e+1],l=o[e+2],u=n[e],f=n[e+1],d=n[e+2];s.getVec(u,I),s.getVec(f,O),s.getVec(d,S),(0,r.d)(O,O,I),(0,r.d)(S,S,I),(0,r.e)(I,O,S),(0,r.n)(I,I),g.pushArray(I),(t===c||u<f)&&(h.push(u),h.push(f),h.push(i),h.push(t)),(a===c||f<d)&&(h.push(f),h.push(d),h.push(i),h.push(a)),(l===c||d<u)&&(h.push(d),h.push(u),h.push(i),h.push(l))}return{edges:h,normals:g}}class f{constructor(){this.index=0,this.length=0}}const d=new s.Z({allocator:e=>e||new f,deallocator:null}),h=new s.Z({deallocator:null}),g=new s.Z({deallocator:null}),p=new class{constructor(){this.position0=(0,i.Ue)(),this.position1=(0,i.Ue)(),this.faceNormal0=(0,i.Ue)(),this.faceNormal1=(0,i.Ue)(),this.componentIndex=0,this.cosAngle=0}},N=(0,i.Ue)(),T=(0,i.Ue)(),I=(0,i.Ue)(),O=(0,i.Ue)(),S=(0,i.Ue)(),m=(0,o.Vl)(4),A=Math.cos(m),E=(0,o.Vl)(35),w=Math.cos(E)},79762:(e,t,n)=>{n.d(t,{Kl:()=>u,extractComponentsEdgeLocationsLayout:()=>N,kY:()=>f,Yr:()=>p});var o=n(35888);function s(e,t,n){const o=t/3,s=new Uint32Array(n+1),r=new Uint32Array(n+1),i=(e,t)=>{e<t?s[e+1]++:r[t+1]++};for(let T=0;T<o;T++){const t=e[3*T],n=e[3*T+1],o=e[3*T+2];i(t,n),i(n,o),i(o,t)}let c=0,a=0;for(let T=0;T<n;T++){const e=s[T+1],t=r[T+1];s[T+1]=c,r[T+1]=a,c+=e,a+=t}const l=new Uint32Array(6*o),u=s[n],f=(e,t,n)=>{if(e<t){const o=s[e+1]++;l[2*o]=t,l[2*o+1]=n}else{const o=r[t+1]++;l[2*u+2*o]=e,l[2*u+2*o+1]=n}};for(let T=0;T<o;T++){const t=e[3*T],n=e[3*T+1],o=e[3*T+2];f(t,n,T),f(n,o,T),f(o,t,T)}const d=(e,t)=>{const n=2*e,o=t-e;for(let s=1;s<o;s++){const e=l[n+2*s],t=l[n+2*s+1];let o=s-1;for(;o>=0&&l[n+2*o]>e;o--)l[n+2*o+2]=l[n+2*o],l[n+2*o+3]=l[n+2*o+1];l[n+2*o+2]=e,l[n+2*o+3]=t}};for(let T=0;T<n;T++)d(s[T],s[T+1]),d(u+r[T],u+r[T+1]);const h=new Int32Array(3*o),g=(t,n)=>t===e[3*n]?0:t===e[3*n+1]?1:t===e[3*n+2]?2:-1,p=(e,t)=>{const n=g(e,t);h[3*t+n]=-1},N=(e,t,n,o)=>{const s=g(e,t);h[3*t+s]=o;const r=g(n,o);h[3*o+r]=t};for(let T=0;T<n;T++){let e=s[T];const t=s[T+1];let n=r[T];const o=r[T+1];for(;e<t&&n<o;){const t=l[2*e],o=l[2*u+2*n];t===o?(N(T,l[2*e+1],o,l[2*u+2*n+1]),e++,n++):t<o?(p(T,l[2*e+1]),e++):(p(o,l[2*u+2*n+1]),n++)}for(;e<t;)p(T,l[2*e+1]),e++;for(;n<o;)p(l[2*u+2*n],l[2*u+2*n+1]),n++}return h}var r=n(55158),i=n(4760),c=n(67009),a=n(41371),l=n(32666);function u(e){const t=f(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return h.updateSettings(e.writerSettings),g.updateSettings(e.writerSettings),(0,l.n)(t,h,g)}function f(e,t,n,r){if(t){const t=s(n,r,e.count);return new d(n,r,t,e)}const i=(0,o.d)(e.buffer,e.stride/4,{originalIndices:n,originalIndicesLength:r}),a=s(i.indices,r,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:a,vertices:c.EdgeInputBufferLayout.createView(i.buffer)}}class d{constructor(e,t,n,o){this.faces=e,this.facesLength=t,this.neighbors=n,this.vertices=o}}const h=new a.D,g=new a.q,p=(0,r.U$)().vec3f(i.T.POSITION0).vec3f(i.T.POSITION1),N=(0,r.U$)().vec3f(i.T.POSITION0).vec3f(i.T.POSITION1).u16(i.T.COMPONENTINDEX)}}]);
//# sourceMappingURL=9762.41788db0.chunk.js.map