"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[6547],{56547:(t,r,e)=>{e.r(r),e.d(r,{default:()=>d});var a=e(63780),n=e(18722),u=e(68700),f=e(50894),o=e(32035),i=e(93311),s=e(78952),l=e(50628),b=e(74432),c=e(89414);class h{transform(t){const r=this._transform(t),e=[r.points.buffer,r.rgb.buffer];null!=r.pointIdFilterMap&&e.push(r.pointIdFilterMap.buffer);for(const a of r.attributes)"buffer"in a.values&&(0,n.eP)(a.values.buffer)&&a.values.buffer!==r.rgb.buffer&&e.push(a.values.buffer);return Promise.resolve({result:r,transferList:e})}_transform(t){const r=(0,b.Ym)(t.schema,t.geometryBuffer);let e=r.length/3,n=null;const u=new Array,f=(0,b.dH)(t.primaryAttributeData,r,e);null!=t.primaryAttributeData&&f&&u.push({attributeInfo:t.primaryAttributeData.attributeInfo,values:f});const o=(0,b.dH)(t.modulationAttributeData,r,e);null!=t.modulationAttributeData&&o&&u.push({attributeInfo:t.modulationAttributeData.attributeInfo,values:o});let i=(0,b.aE)(t.rendererInfo,f,o,e);if(t.filterInfo&&t.filterInfo.length>0&&null!=t.filterAttributesData){const f=t.filterAttributesData.filter(a.pC).map((t=>{const a=(0,b.dH)(t,r,e),n={attributeInfo:t.attributeInfo,values:a};return u.push(n),n}));n=new Uint32Array(e),e=(0,b.hv)(r,i,n,t.filterInfo,f)}for(const a of t.userAttributesData){const t=(0,b.dH)(a,r,e);u.push({attributeInfo:a.attributeInfo,values:t})}3*e<i.length&&(i=new Uint8Array(i.buffer.slice(0,3*e))),function(t,r,e){if(0!==e)for(let a=0;a<r;a++)t[3*a+2]+=e}(r,e,t.elevationOffset);const l=p(r,e,c.Oo.fromData(t.obbData),s.Z.fromJSON(t.inSR),s.Z.fromJSON(t.outSR));return{obbData:t.obbData,points:l,rgb:i,attributes:u,pointIdFilterMap:n}}}function p(t,r,e,a,n){if(!(0,l.projectBuffer)(t,a,0,t,n,0,r))throw new Error("Can't reproject");const f=(0,i.d9)(e.center),s=(0,i.Ue)(),b=(0,i.Ue)(),c=(0,i.d9)(e.halfSize);(0,u.Kx)(m,e.quaternion);const h=new Float32Array(3*r);for(let u=0;u<r;u++){let r=3*u;s[0]=t[r]-f[0],s[1]=t[r+1]-f[1],s[2]=t[r+2]-f[2],(0,o.w)(b,s,m),c[0]=Math.max(c[0],Math.abs(b[0])),c[1]=Math.max(c[1],Math.abs(b[1])),c[2]=Math.max(c[2],Math.abs(b[2])),h[r++]=s[0],h[r++]=s[1],h[r]=s[2]}return e.halfSize=c,h}const m=(0,f.Ue)();function d(){return new h}}}]);
//# sourceMappingURL=6547.1a8de6b2.chunk.js.map